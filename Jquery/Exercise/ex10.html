<!DOCTYPE html>
<html lang="ko">
  <head>
    <!-- jquery ex10 -->
    <title>fetch와 ajax</title>
    <!-- https://jsonplaceholder.typicode.com/ -->
    <script src="https://code.jquery.com/jquery-3.6.3.min.js"></script>
    <script>
      // JS에서 HTTP 통신을 하는 방법
      // 1. ES6 fetch
      // 2. jquery ajax 함수
      // 3. 리액트,노드 JS axios 모듈 함수

      //JSON.parse()란?
      //parse 메소드는 string 객체를 json 객체로 변환시켜줍니다.
      //JSON.stringify란?
      //stringify 메소드는 json 객체를 String 객체로 변환시켜 줍니다.

      fetch("https://jsonplaceholder.typicode.com/comments")
        .then((response) => {
          return response.json();
        })

        .then((json) => {
          console.log(JSON.stringify(json));
          console.log(json.count);
          console.log(json);
          let index = 0;
          for (const obj of json) {
            console.log(obj.postId);
            console.log(obj.id);
            console.log(obj.name);
            console.log(obj.email);
            console.log(obj.body);
            if (index++ > 5) break;
          }
        })
        .catch((error) => {
          console.log(error);
        });
    </script>
  </head>
  <body>
    <h2>Info</h2>
    <table id="example" border="2" width="500" height="70" cellpadding="5">
      <tr align="center">
        <th>postId</th>
        <th>id</th>
        <th>name</th>
        <th>email</th>
        <th>body</th>
      </tr>
    </table>
    <script>
      $.ajax({
        dataType: "json",
        url: "https://jsonplaceholder.typicode.com/comments",
        mimeType: "application/json",
        success: function (result) {
          var tableData = "";

          $.each(result, function (index, value) {
            tableData += "<tr>";
            tableData += "<td>" + value.postId + "</td>";
            tableData += "<td>" + value.id + "</td>";
            tableData += "<td>" + value.name + "</td>";
            tableData += "<td>" + value.email + "</td>";
            tableData += "<td>" + value.body + "</td>";
            tableData += "</tr>";
          });

          // append 함수: 동적으로 문서객체를 추가함
          $("#example").append(tableData);
        },
      });
    </script>
  </body>
</html>
