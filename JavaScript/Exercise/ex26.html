<!DOCTYPE html>
<html lang="ko">
  <head>
    <title>연습문제 8</title>
  </head>
  <body>
    <script>
      // 2차배열을 활용한 문제
      // 간단한 학생부 DB를 배열로 만들어보자.
      //      학생번호  이름    영어점수  나이
      // 1행 :  1       홍길동    70       20
      // 2행 :  2       변사또    60       30
      // 3행 :  3       사임당    50       40
      // 4행 :  4       김진사    90       50
      // 4명까지 입력받고(prompt함수) : 1,홍길동,70,20
      // 학생번호 순으로 출력하고,
      // 이름 가나다순으로 출력하고,
      // 영어 점수 순으로 출력하고,
      // 나이순(오름차순)으로 출력하시오.

      // 입력 방법
      // 4
      // 1,홍길동,70,20
      // 2,변사또,60,30
      // 3,사임당,50,40
      // 4,김진사,90,50

      let rowNum = prompt("입력할 데이터 수를 입력하세요.");
      let data = [];
      for (let i = 0; i < rowNum; i++) {
        let d = prompt("데이터를 입력하세요.\n학생번호,이름,영어점수,나이");
        let dArr = d.split(",");
        data[i] = dArr;
      }

      write();

      function srt(sortType) {
        if (sortType == "학생번호") {
          srtEach(0);
        }

        if (sortType == "이름") {
          srtEach(1);
        }

        if (sortType == "영어점수") {
          srtEach(2);
        }

        if (sortType == "나이") {
          srtEach(3);
        }
      }

      function write() {
        document.open();
        document.write(
          '<div id="row" style="display:flex">' +
            '<button onclick="srt(\'학생번호\')" class="element" style="flex: 1 20%; border: none;cursor: pointer;">학생번호</button>' +
            '<button onclick="srt(\'이름\')" class="element" style="flex: 1 20%; border: none; cursor: pointer;">이름</button>' +
            '<button onclick="srt(\'영어점수\')" class="element" style="flex: 1 20%; border: none;cursor: pointer;">영어점수</button>' +
            '<button onclick="srt(\'나이\')" class="element" style="flex: 1 20%; border: none; cursor: pointer;">나이</button>' +
            "</div>"
        );

        for (let row of data) {
          document.write('<div id="row" style="display:flex">');
          for (let element of row) {
            document.write(
              '<div class="element" style="flex: 1 20%;">' + element + "</div>"
            );
          }
          document.write("</div>");
        }
        document.close();
      }

      function srtEach(n) {
        data.sort(function (a, b) {
          // sort
          let aComp = a[n];
          let bComp = b[n];
          if (aComp > bComp) return 1;
          else if (aComp < bComp) return -1;
          else return 0;
        });

        write();
      }
    </script>
  </body>
</html>
